plugins {
  id "kotlin" version "1.3.70"
  id "com.github.johnrengelman.shadow" version "5.2.0"
}
repositories { mavenCentral() }

group "org.duangsuse.kamet"
version "1.0-SNAPSHOT"

sourceSets {
  main { dependencies {
    implementation kotlin("stdlib-jdk8")
    implementation "org.bytedeco:llvm-platform:10.0.0-1.5.3"
  } }
  test { dependencies {
    implementation kotlin("test-junit")
  } }
}

import org.jetbrains.kotlin.gradle.tasks.KotlinCompile
import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar

tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile) {
  kotlinOptions.jvmTarget = "1.8"
}

shadowJar {
  baseName = "kamet"
  manifest {}

  dependsOn jar.archiveFile
  configurations = [project.configurations.runtime]
}
